<div class="row resHeader">
  <label for="">{{$ctrl.resources.Global_ReferentielRessource}}</label>
  <div class="inner-addon right-addon pull-left searchBloc">
    <i class="material-icons">search</i>
    <input type="text"
           class="form-control"
           ng-model="$ctrl.search"
           ng-change="$ctrl.searchTextChanged()"
           placeholder="{{$ctrl.resources.Global_ReferentielRessource_Placeholder}}">
  </div>
</div>

<div id="containerRessources" class="fred-scroll">
  <div ng-repeat="chapitre in $ctrl.chapitres track by $index">
    <div class="res_lev1 panel-default"
         ng-class="{'isOpen': chapitre.isOpen }">

      <!--CHAPITRE-->
      <div class="Chapitre row panel-heading"
           ng-click="$ctrl.clickChapitre(chapitre)">

        <div class="col-md-2 pl5">
          <div class="arrow"></div>
        </div>

        <div class="col-md-2">
          <div class="lb">{{$ctrl.resources.Budget_Ressources_Template_Chapitre_Code}}</div>
          <span>{{chapitre.Code}}</span>
        </div>
        <div class="col-md-8">
          <div class="lb">{{$ctrl.resources.Budget_Ressources_Template_Chapitre_Libelle}}</div>
          <span class="field">{{chapitre.Libelle}}</span>
        </div>
      </div>

      <!--SOUS CHAPITRE-->
      <div class="sousChapitre"
           ng-if="chapitre.isOpen">
        <div ng-repeat="sousChapitre in chapitre.SousChapitres track by $index"
             class="row main_line">

          <div class="row res_lev2 panel-default"
               ng-class="{'isOpen': sousChapitre.isOpen }"
               ng-click="$ctrl.clickSousChapitre(sousChapitre)">

            <div class="col-md-2 pad_l">
              <div class="arrow"></div>
            </div>
            <div class="col-md-2">
              <div class="lb">{{$ctrl.resources.Budget_Ressources_Template_SousChapitre_Code}}</div>
              <span>{{sousChapitre.Code}}</span>
            </div>
            <div class="col-md-8">
              <div class="lb">{{$ctrl.resources.Budget_Ressources_Template_SousChapitre_Libelle}}</div>
              <span class="field">{{sousChapitre.Libelle}}</span>
            </div>
          </div>

          <!--RESSOURCES-->
          <div class="row res_lev3"
               ng-if="sousChapitre.isOpen">
            <div ng-repeat="ofRessource in sousChapitre.Ressources track by $index">
              <of-ressource-component chapitre="chapitre"
                                          sous-chapitre="sousChapitre"
                                          current-ressource="ofRessource"
                                          devise-selected="$ctrl.deviseSelected"
                                          ci-selected="$ctrl.ciSelected"
                                          resources="$ctrl.resources">
              </of-ressource-component>
            </div>
          </div>

        </div>
      </div>


    </div>
  </div>

  <script type='text/javascript'>

    var RessourcesContent = $(window).height();
    var RessourcesWidth = $(window).width();

    if (RessourcesWidth > 1300) {
      $('#containerRessources').css('height', RessourcesContent - (RessourcesContent / 5));
    } else {
      $('#containerRessources').css('height', RessourcesContent - (RessourcesContent / 4));
    }

  </script>


</div>
