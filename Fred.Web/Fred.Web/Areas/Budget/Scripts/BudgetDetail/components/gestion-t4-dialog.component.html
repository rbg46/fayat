<div class="modal fade gestion-t4-dialog" id="GESTION_T4_DIALOG_ID" role="dialog">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title"><i class="flaticon flaticon-layers"></i>{{$ctrl.Titre}}</h2>
                <i class="flaticon flaticon-multiply close pull-right" data-dismiss="modal" title="{{::$ctrl.resources.Global_Modal_Annuler_Tooltip}}"></i>
            </div>
            <div class="modal-body">
                <div ng-if="$ctrl.Erreurs.length > 0" class="alert alert-warning">
                    <div ng-repeat="error in $ctrl.Erreurs">{{error}}</div>
                </div>

                <!--Regroupement T1-->
                <div class="row">
                    <div class="col-lg-4 col-md-4 col-sm-4">{{$ctrl.resources.Budget_GestionT4_RegroupementT1}}</div>
                    <div class="col-lg-2 col-md-2 col-sm-2">{{$ctrl.Tache1.Code}}</div>
                    <div class="col-lg-6 col-md-6 col-sm-6">{{$ctrl.Tache1.Libelle}}</div>
                </div>

                <!--Regroupement T2-->
                <div class="row">
                    <div class="col-lg-4 col-md-4 col-sm-4">{{$ctrl.resources.Budget_GestionT4_RegroupementT2}}</div>
                    <div class="col-lg-2 col-md-2 col-sm-2">{{$ctrl.Tache2.Code}}</div>
                    <div class="col-lg-6 col-md-6 col-sm-6">{{$ctrl.Tache2.Libelle}}</div>
                </div>

                <!--Regroupement T3-->
                <div class="row">
                    <div class="col-lg-4 col-md-4 col-sm-4">{{$ctrl.resources.Budget_GestionT4_RegroupementT3}}</div>
                    <div class="col-lg-2 col-md-2 col-sm-2">{{$ctrl.Tache3.Code}}</div>
                    <div class="col-lg-6 col-md-6 col-sm-6">{{$ctrl.Tache3.Libelle}}</div>
                </div>

                <!--Mode d'ajout-->
                <div class="row separator" ng-show="$ctrl.CurrentMode === $ctrl.Mode.AddT4">
                    <div class="col-lg-6 col-md-6 col-sm-6">
                        <!--Radio Créer une nouvelle T4-->
                        <input type="radio"
                               id="GESTION_T4_DIALOG_RADIO_COPIER_ID"
                               ng-model="$ctrl.AjouterMode"
                               value="{{$ctrl.AjouterModeEnum.Creer}}"
                               ng-required="true"
                               ng-click="$ctrl.OnAjouterModeChanged()">
                        <label for="GESTION_T4_DIALOG_RADIO_COPIER_ID"><span></span>{{::$ctrl.resources.Budget_GestionT4_Checkbox_Creer}}</label>
                    </div>
                    <div class="col-lg-6 col-md-6 col-sm-6">
                        <!--Radio Sélectionner une T4 existante-->
                        <input type="radio"
                               id="GESTION_T4_DIALOG_RADIO_EXISTANTE_ID"
                               ng-model="$ctrl.AjouterMode"
                               value="{{$ctrl.AjouterModeEnum.Existante}}"
                               ng-required="true"
                               ng-click="$ctrl.OnAjouterModeChanged()">
                        <label for="GESTION_T4_DIALOG_RADIO_EXISTANTE_ID"><span></span>{{::$ctrl.resources.Budget_GestionT4_Checkbox_Existante}}</label>
                    </div>
                </div>

                <!--Code et libellé-->
                <div class="row separator" ng-show="$ctrl.CurrentMode !== $ctrl.Mode.AddT4 || $ctrl.AjouterMode === $ctrl.AjouterModeEnum.Creer">
                    <div class="col-lg-4 col-md-4 col-sm-4">
                        <label for="txtCodeReferentiel">{{::$ctrl.resources.Budget_GestionT4_Code}}</label>
                        <input ng-disabled="$ctrl.CurrentMode == $ctrl.Mode.Delete || $ctrl.CurrentMode == $ctrl.Mode.DeleteBudgetT4" type="text" id="txtCodeReferentiel" class="form-control" maxlength="10" ng-model="$ctrl.Code">
                    </div>
                    <div class="col-lg-8 col-md-8 col-sm-8">
                        <label for="txtLabelReferentiel">{{::$ctrl.resources.Budget_GestionT4_Libelle}}</label>
                        <input ng-disabled="$ctrl.CurrentMode == $ctrl.Mode.Delete || $ctrl.CurrentMode == $ctrl.Mode.DeleteBudgetT4" type="text" id="txtLabelReferentiel" class="form-control" maxlength="100" ng-model="$ctrl.Libelle">
                    </div>
                </div>

                <!--Sélection de T4-->
                <div class="row separator" ng-show="$ctrl.CurrentMode === $ctrl.Mode.AddT4 && $ctrl.AjouterMode === $ctrl.AjouterModeEnum.Existante">
                    <div class="col-lg-12 col-md-12 col-sm-12">
                        <select required
                                class="form-control"
                                ng-model="$ctrl.Tache4Inutilisee"
                                ng-options="tache4 as (tache4.Code + ' - ' + tache4.Libelle) for tache4 in $ctrl.Tache4Inutilisees" />
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <!--Bouton pour ajouter une tâche-->
                <button class="btn btn-default pull-left"
                        ng-disabled="$ctrl.Busy"
                        ng-click="$ctrl.OnAddT4()"
                        ng-if="$ctrl.CurrentMode === $ctrl.Mode.AddT4"
                        title="{{::$ctrl.resources.Budget_GestionT4_Bouton_Ajouter_Tooltip}}">
                    {{::$ctrl.resources.Budget_GestionT4_Bouton_Ajouter}}
                </button>

                <!--Bouton pour enregistrer les changements-->
                <button class="btn btn-default pull-left"
                        ng-disabled="$ctrl.Busy || !$ctrl.T4HasChanged()"
                        ng-click="$ctrl.OnChangeT4()"
                        ng-if="$ctrl.CurrentMode === $ctrl.Mode.ChangeT4"
                        ng-attr-title="{{$ctrl.T4HasChanged() ? $ctrl.resources.Global_Bouton_Enregistrer_Tooltip : $ctrl.resources.Budget_GestionT4_Tooltip_EnregistrerPasDeModification}}">
                    {{::$ctrl.resources.Global_Bouton_Enregistrer}}
                </button>

                <!--Bouton pour supprimer la tâche-->
                <button class="btn btn-default pull-left"
                        ng-disabled="$ctrl.Busy"
                        ng-click="$ctrl.OnDeleteT4()"
                        ng-if="$ctrl.CurrentMode === $ctrl.Mode.DeleteT4"
                        title="{{::$ctrl.resources.Global_Bouton_Supprimer_Tooltip}}">
                    {{::$ctrl.resources.Global_Bouton_Supprimer}}
                </button>

                <!--Bouton pour supprimer la ligne de sous détail-->
                <button class="btn btn-default pull-left"
                        ng-disabled="$ctrl.Busy"
                        ng-click="$ctrl.OnDeleteBudgetT4()"
                        ng-if="$ctrl.CurrentMode === $ctrl.Mode.DeleteBudgetT4"
                        title="{{::$ctrl.resources.Global_Bouton_Supprimer_Tooltip}}">
                    {{::$ctrl.resources.Global_Bouton_Supprimer}}
                </button>

                <!--Bouton annuler-->
                <button class="btn btn-link pull-right"
                        data-dismiss="modal"
                        title="{{::$ctrl.resources.Global_Bouton_Annuler_Tooltip}}">
                    {{::$ctrl.resources.Global_Bouton_Annuler}}
                </button>
            </div>
        </div>
    </div>
</div>
