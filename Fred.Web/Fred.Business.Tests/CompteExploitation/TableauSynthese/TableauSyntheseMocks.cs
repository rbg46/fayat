using System.Collections.Generic;
using Fred.Entities.Budget;
using Fred.Entities.Referential;
using Fred.Entities.ReferentielFixe;
using Fred.Framework.Linq;
using Fred.Web.Shared.Models.Depense;

namespace Fred.Business.Tests.CompteExploitation.TableauSynthese
{
    public static class TableauSyntheseMocks
    {
        private static List<TacheEnt> GetTachesList()
        {
            var tache11 = new TacheEnt { TacheId = 1, Code = "T1_1", Libelle = "Tache1_1" };
            var tache21 = new TacheEnt { TacheId = 2, Code = "T2_1", Libelle = "Tache2_1", Parent = tache11 };
            var tache31 = new TacheEnt { TacheId = 3, Code = "T3_1", Libelle = "Tache3_1", Parent = tache21 };
            var tache12 = new TacheEnt { TacheId = 1, Code = "T1_2", Libelle = "Tache1_2" };
            var tache22 = new TacheEnt { TacheId = 2, Code = "T2_2", Libelle = "Tache2_2", Parent = tache12 };
            var tache32 = new TacheEnt { TacheId = 3, Code = "T3_2", Libelle = "Tache3_2", Parent = tache22 };
            var tache33 = new TacheEnt { TacheId = 4, Code = "T3_3", Libelle = "Tache3_3", Parent = tache22 };

            return new List<TacheEnt>
            {
                tache31,
                tache32,
                tache33
            };
        }

        private static List<RessourceEnt> GetRessourcesList()
        {
            var chapitre1 = new ChapitreEnt { ChapitreId = 1, Code = "C1", Libelle = "Chap1" };
            var sousChapitre1 = new SousChapitreEnt { SousChapitreId = 1, Code = "SC1", Libelle = "SousChap1", Chapitre = chapitre1 };
            var ressource1 = new RessourceEnt { RessourceId = 1, Code = "R1", Libelle = "Ressource1", SousChapitre = sousChapitre1 };
            var chapitre2 = new ChapitreEnt { ChapitreId = 2, Code = "C2", Libelle = "Chap2" };
            var sousChapitre2 = new SousChapitreEnt { SousChapitreId = 2, Code = "SC2", Libelle = "SousChap2", Chapitre = chapitre2 };
            var ressource2 = new RessourceEnt { RessourceId = 2, Code = "R2", Libelle = "Ressource2", SousChapitre = sousChapitre2 };
            var ressource3 = new RessourceEnt { RessourceId = 3, Code = "R3", Libelle = "Ressource3", SousChapitre = sousChapitre2 };

            return new List<RessourceEnt> {
                ressource1,
                ressource2,
                ressource3
            };
        }
        public static List<DepenseExhibition> GetDepenseList()
        {
            var ressources = GetRessourcesList();
            var taches = GetTachesList();
            var depenseList = new List<DepenseExhibition>();
            
            depenseList.Add(new DepenseExhibition
            {
                RessourceId = ressources[0].RessourceId,
                Ressource = ressources[0],
                MontantHT = 100,
                Tache = taches[0],
            });

            depenseList.Add(new DepenseExhibition
            {
                RessourceId = ressources[0].RessourceId,
                Ressource = ressources[0],
                MontantHT = 300,
                Tache = taches[0],
            });

            depenseList.Add(new DepenseExhibition
            {
                RessourceId = ressources[1].RessourceId,
                Ressource = ressources[1],
                MontantHT = 300,
                Tache = taches[1],
            });

            depenseList.Add(new DepenseExhibition
            {
                RessourceId = ressources[2].RessourceId,
                Ressource = ressources[2],
                MontantHT = 300,
                Tache = taches[2],
            });
            return depenseList;
        }

        public static List<BudgetT4Ent> GetBudgetT4List()
        {
            var budgetT4List = new List<BudgetT4Ent>();

            var ressources = GetRessourcesList();
            var taches = GetTachesList();

            budgetT4List.Add(new BudgetT4Ent
            {
                MontantT4 = 100,
                T3 = taches[0],
                T3Id = taches[0].TacheId,
                BudgetSousDetails = new List<BudgetSousDetailEnt>
                {
                    new BudgetSousDetailEnt { RessourceId = ressources[0].RessourceId, Ressource = ressources[0], Montant = 10,},
                    new BudgetSousDetailEnt { RessourceId = ressources[1].RessourceId, Ressource = ressources[1], Montant = 20 },
                    new BudgetSousDetailEnt { RessourceId = ressources[2].RessourceId, Ressource = ressources[2], Montant = 30 }
                }
            });

            budgetT4List.Add(new BudgetT4Ent
            {
                MontantT4 = 300,
                T3 = taches[2],
                T3Id = taches[0].TacheId,
                BudgetSousDetails = new List<BudgetSousDetailEnt>
                {
                    new BudgetSousDetailEnt { RessourceId = ressources[0].RessourceId,  Ressource = ressources[0], Montant = 11 },
                }
            });
            
            foreach (var budgetT4 in budgetT4List)
            {
                budgetT4.BudgetSousDetails.ForEach(x => x.BudgetT4 = budgetT4);
            }
            return budgetT4List;
        }
    }
}
